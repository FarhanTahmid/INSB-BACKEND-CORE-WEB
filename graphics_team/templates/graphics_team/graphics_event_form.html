<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Events | Graphics Team</title>
    <link rel="icon" href="{% static 'logos/logo.gif' %}"/>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="{% static 'newTable.css' %}" type="text/css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


    {% block common_css %}
        {% include "common_css.html" %}
    {% endblock common_css %}
    <style>
        body, html {
        
        margin: 0;
        
        align-items: center;
        justify-content: center;
        }

        .row {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        }
        /* Styles for the lightbox overlay */
        .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 999;
        }
        .row {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
          }
          .btn-container {
            text-align: center;
          }
          
          .btn {
            max-width: 100%;
            width: auto;
            display: inline-block;
            white-space: normal; /* Allow text to wrap within the button */
            word-wrap: break-word; /* Break long words if necessary */
            font-size: 16px; /* Adjust the font size as needed */
          }
          /* FR card container css */
          .container-card{
            display: grid; 
            grid-template-columns: repeat(3, 350px);
            {% comment %} grid-gap: 30px; {% endcomment %}
            grid-row-gap: 10px;
            
          }
          
          /* Media query for smaller screens (adjust the breakpoint as needed) */
          @media (max-width: 768px) {
            .btn {
              width: 100%; /* Make the button full width on smaller screens */
            }
          }

          @import url('https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese');
          
          .upload__box {
            padding: 40px;
          }
          .upload__inputfile {
            width: 0.1px;
            height: 0.1px;
            opacity: 0;
            overflow: hidden;
            position: absolute;
            z-index: -1;
          }
          .upload__btn {
            display: inline-block;
            font-weight: 600;
            color: #fff;
            text-align: center;
            min-width: 116px;
            padding-top: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid;
            background-color: #00629B;
            border-color: #00629B;
            border-radius: 10px;
            line-height: 15px;
            font-size: 14px;
          }
          .upload__btn:hover {
            background-color: unset;
            color: #4045ba;
            transition: all 0.3s ease;
          }
          .upload__btn-box {
            margin-bottom: 10px;
          }
          .upload__img-wrap {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
          }
          .upload__img-box {
            width: 200px;
            padding: 0 10px;
            margin-bottom: 12px;
          }
          .upload__img-close {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.5);
            position: absolute;
            top: 10px;
            right: 10px;
            text-align: center;
            line-height: 24px;
            z-index: 1;
            cursor: pointer;
          }
          .upload__img-close:after {
            content: "✖";
            font-size: 14px;
            color: white;
          }
          
          .img-bg {
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
            position: relative;
            padding-bottom: 100%;
          }
          #image-preview {
            /*max-width: 100%;
            height:auto;  */
            width: 300px; 
            height: 300px; 
            object-fit: cover; 
            cursor: pointer;
            transition: opacity 0.3s ease-in-out; /* Add a smooth transition effect */
        }

        #image-preview:hover {
            opacity: 0.7; /* Lower the opacity on hover */
        }

        #file-input {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        .btn.btn-primary {
          max-width: 100%; /* Set the maximum width to 100% */
          width: auto; /* Allow the width to adjust */
          display: inline-block;
          white-space: normal; /* Allow text to wrap within the button */
          word-wrap: break-word; /* Break long words if necessary */
          font-size: 16px; /* Adjust the font size as needed */
      }


      @media (max-width: 768px) {
        .btn.btn-primary {
            width: 100%; /* Make the button full width on smaller screens */
        }
      }


      #selectedImages {
        margin-top: 10px;
      }
  
  
      .remove-image {
        cursor: pointer;
        color: red;
        font-weight: bold;
      }
  
      .form-group {
        margin-bottom: 15px;
      }
      @media only screen and (max-width: 768px) {
        .form-group.row {
            flex-direction: column;
        }
  
        .custom-file {
            margin-bottom: 10px;
        }
      }
  
      .selected-image-container {
        max-width: 200px; /* Set the maximum width for the image container */
      }
      
      .selected-image {
          max-width: 100%; /* Make the image responsive within its container */
          height: auto;    /* Maintain the aspect ratio */
      }
  
      .image-container {
        position: relative;
        display: inline-block;
        width: 100%;
    }
    
    .image-container-item {
        width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        transition: box-shadow 0.3s ease;
        object-fit: cover; /* Ensure the image fills the container */
    }
    
  
      .image-container-item:hover {
          box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
      }
  
      .cross-button {
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
        background-color: white; /* Set the background color to white */
        border: none;
        padding: 0;
        width: 25px; /* Set the width and height to create a circle */
        height: 25px;
        border-radius: 50%; /* Make it a circle */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem; /* Adjust font size */
        color: black; /* Set the initial color */
        z-index: 2;
        transition: background-color 0.3s ease, color 0.3s ease; /* Add transitions for color and background-color changes */
        line-height: 1; /* Ensure line height does not affect vertical alignment */
    }
    
    
      .cross-button:hover {
          color: gray; /* Change color on hover */
      }
    
          
          

        
    </style>
</head>
<body>
<!-- ############ LAYOUT START-->
<div class="app" id="app">

    <!-- aside -->
    <div id="aside" class="app-aside modal nav-dropdown">

          {% block sidebar %}
            {% include 'users/sidebar.html' %}
          {% endblock %}

    </div>
    <!-- aside end -->
    <!-- navbar content -->
    <div id="content" class="app-content box-shadow-z0" role="main">
        {% block navbar %}
            {% include 'graphics_navbar.html' %}
        {% endblock navbar %}

    </div>
    <!--navbar content-->
    <!-- ############ PAGE START-->
    <div ui-view class="app-body" style="justify-content:center; margin-left:15%; margin-right:15%;" id="view">


        <br>
        <br>
        <h2 style="justify-content:center;text-align:center;margin-bottom:15px;"> <span style="color:#00629B;">{{event_name}}</b></span></h2>
        <h6>Note:</h6>
        <ol style="justify-content:center;margin-bottom:15px;"><b>
          <li>Provide the Link of the folder for the Banner Images </li>
          <li>If the banner picture is already uploaded, you can change it by deleting existing one.
            Select the desired picture and hit <span style="color:blue;">'Save'</span>.</li>
          <li>Make sure to save any changes made before leaving</li>
        </ol></b>
        

<<<<<<< HEAD
        <div style="text-align:center; margin-top=30px; background-color: white;">  
          <div class="container" style="justify-content:center;">
            
            </ul>
            
              <br><br>
                 
                                      <div class="box-header">
                                          <h1 style="text-align:center;font-size:30px;">Add Details</h1>
                                      </div>
                                      
                                      <form method="POST" enctype="multipart/form-data">
                                          {% csrf_token %}
                                          <div class="box-body">
                                            
                                                  <div class="form-group row">
                                                      <label class="col-sm-2 form-control-label">Folder Drive Link for Event Pictures</label>
                                                      <div class="col-sm-10">
                                                          <input
                                                          placeholder="Provide Drive Link for The Event"
                                                          class="form-control"
                                                          type="url"
                                                          autocomplete="off"
                                                          required
                                                          id="#field1"
                                                          value="{{media_link}}"
                                                          name="drive_link_of_event"/>
                              
                                                      </div>
                                                  </div>
                                                  <div class="form-group row">
                                                      <label class="col-sm-2 form-control-label">Folder Drive Link for Pictures with Logos</label>
                                                      <div class="col-sm-10">
                                                          <input
                                                          placeholder="Provide Link for the Logo's"
                                                          class="form-control"
                                                          type="url"
                                                          autocomplete="off"
                                                          required
                                                          value="{{logo_link}}"
                                                          name="logo_link_of_event"/>
                              
                                                      </div>
                                                  </div>
                                                  {% if not all_image_exists %}
                                                  <div class="container" style="justify-content:center;">
                                                      <label class="form-group row"><b>Upload Maximum {{required}} images<b></label>
                                                                     
                                                                      <div class="upload__box">
                                                                          <div class="upload__btn-box">
                                                                            <label class="upload__btn">
                                                                              <p>Upload Image</p> 
                                                                              <input type="file" multiple="" id="fileInput" name="images" data-max_length="20" class="upload__inputfile">
                                                                            </label>
                                                                          </div>
                                                                          <div class="upload__img-wrap"></div>
                                                                        </div>
                                                       
                                                  </div>
                                                  {% endif %}
                                        
                                                  <br>
                                                  <div class="footer" style="position:right;">
                                                    {% if all_image_exists %}
                                                       <button type="submit" name="add_event_pic_and_others" class="btn btn-success p-x-md" value="Update">Update</button> 
                                                    {% elif not all_image_exists and image_exists %}
                                                       <button type="submit" name="add_more_pic_and_update_link" class="btn btn-success p-x-md" value="Add">Update</button>
                                                    {% else %}
                                                      <button type="submit" name="add_event_pic_and_others" class="btn btn-success p-x-md" value="Add">Add</button>
                                                    {% endif %}              
                                                  </div>  
                                              </div>
                                              
                                              
                                          </div>
                                      </form>
                                      <div class="container">
                                        <div class="box-body" style="justify-content:center;">
                                        {% if image_exists %}
                                                                              
                                                                                <div class="form-group">
                                                                                    
                                                                                    <div class="container row container-card" style="justify-content:center;">
                                                                                    
                                                                                    {% for i in Img %}
                                                                                    <form method="POST" enctype="multipart/form-data">
                                                                                      {% csrf_token %}
                                                                                    {% comment %} <div class="container">
                                                                                        <img id="image-preview" src="{{media_url}}{{ i.selected_images}}" alt="Image {{ forloop.counter }}"  width=100% height=auto style="border: 2px solid black;on-hover: opacity;"  onclick="triggerFileInput(this)">
                                                                                        <input class="d-none" type="file"  id="file-input"   onchange="displayNewImage(this)" name="new_image">
                                                                                        <input type="hidden" value={{i.id}} name="ImageID">
                                                                                        
                                                                                    </div> {% endcomment %}
                                                                                    <!-- my card FR -->
                                                                                    <div class="container"> 
                                                                                      <div class="card" style="width: 18rem;">
                                                                                        <img id="image-preview" src="{{media_url}}{{ i.selected_images}}" alt="Image {{ forloop.counter }}"  style="border: 2px solid black;on-hover: opacity;"  onclick="triggerFileInput(this)" class="card-img-top img-fluid clickable">
                                                                                        <div class="card-body my-3">
                                                                                         
                                                                                          <input class="d-none" type="file"  id="file-input"   onchange="displayNewImage(this)" name="new_image">
                                                                                          <input type="hidden" value={{i.id}} name="ImageID">
                                                                                          <input type="submit" class="btn btn-primary p-x-md" name="submitted_changed_picture" value="Change">
                            
                                                                                          <!--delete button added here -->
                                                                                          <input type="submit" class="btn btn-danger p-x-md" name="submitted_deleted_picture" value="Delete">
                                                                                        </div>
                                                                                      </div>
                                                                                    </div>
                                                                                    <br>
                                                                                    {% comment %} <input type="submit" class="btn btn-primary p-x-md" name="submitted_changed_picture" value="Change"> {% endcomment %}
                            
                                                                                     <!--delete button added here -->
                                                                                    {% comment %} <input type="submit" class="btn btn-danger p-x-md" name="submitted_changed_picture" value="Delete"> {% endcomment %}
                                                                                    
                                                                                    
                                                                                    <br>
                                                                                  </form>  
                                                                                    {% endfor %}
                                                                                 
                                                                                
                                                                                    </div>
                                                            
                                                                                    </div>
                                                                                </div>
                                                                                {% endif %}
                                                                              </div>
                                      </div> 

                                  
                      
          </div>
        </div>
=======
      <div style="text-align:center; margin-top=30px; background-color: white;">
            <div class="container" style="justify-content:center;">
              
              </ul>
              
                <br><br>

              <div class="box-header">
                  <h1 style="text-align:center;font-size:30px;">Add Details</h1>
              </div>
              
              <div class="py-3 text-center">
                {% for message in messages %}
                    <p style="color: red;" class="message">
                        {{ message }}
                        <button class="close-message" onclick="closeMessage(this)" style="border: none; background: none;">✖</button>
                    </p>
                {% endfor %}
              </div>

              <form method="POST" enctype="multipart/form-data">
                  {% csrf_token %}
                  <div class="box-body">
                    
                    <div class="form-group row">
                        <label class="col-sm-2 form-control-label">Folder Drive Link for Banner Pictures</label>
                        <div class="col-sm-10">
                            <input
                            placeholder="Provide Drive Link for The Banner Pictures"
                            class="form-control"
                            type="url"
                            autocomplete="off"
                            required
                            id="field1"
                            value="{{graphic_links.graphics_link}}"
                            name="drive_link_of_graphics"/>

                        </div>
                    </div>

                    <div class="form-group row">
                      <label for="images" class="col-sm-2 form-control-label">Upload Image:</label>
                      <div class="col-sm-8">
                          <div class="custom-file" style="margin-top: 5px;">
                              <input type="file" class="custom-file-input" id="image-input" name="image" accept="image/*">
                              <label class="custom-file-label bg-light" for="image-input">Choose file</label>
                          </div>
                      </div>
                      <button type="submit" name="save" class="btn btn-outline-success p-x-md col-sm-2" value="Add">Save</button>
                      <br>
                      <div id="selected-image-container"></div>
                      <input type="hidden" name="selected_image" id="selected-image">
                    </div>

                    <br>
                    <hr>
                    <br>
                    {% if graphics_banner_image.selected_image is not None %}
                    <div class="image-container">
                      <img
                        src="{{media_url}}{{ graphics_banner_image.selected_image}}"
                        alt="Image"
                        class="img-fluid image-container-item"
                        data-toggle="modal"
                        data-target="#fullViewModal"
                      />
                    
                      <!-- Full View Modal -->
                      <div
                        id="fullViewModal"
                        class="modal fade"
                        tabindex="-1"
                        role="dialog"
                        aria-labelledby="fullViewModalLabel"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog modal-lg" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="fullViewModalLabel">Image Full View</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                    
                            <div class="modal-body">
                              <img
                                src="{{media_url}}{{graphics_banner_image.selected_image}}"
                                alt="Image"
                                class="img-fluid"
                                style="width: 100%; margin: 0 auto; display: block;"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    
                      <!-- Cross button to trigger modal -->
                      <button type="button" class="cross-button" data-toggle="modal" data-target="#deleteModal" onclick="openModal('{{graphics_banner_image.selected_image}}')">
                        &times; <!-- Use the "times" symbol (X) as a close icon -->
                      </button>
                    
                      <!-- Confirm Delete Modal -->
                      <div id="deleteModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                    
                            <form method="post">
                                {% csrf_token %}
                                <div class="modal-body">
                                    <p><input id="image_id" name= "remove_image" type="hidden"></p>
                                    <p>Are you sure you want to delete this image?</p>
                                </div>
                                <div class="modal-footer">
                                    <input type="submit" class="btn btn-outline-danger buttons" value="Delete" name="delete_image">
                                    <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% endif %}
                       
                  </div>
              </form>     
            </div>
          </div>
      </div>


     <!--Theme Switcher-->
>>>>>>> b78ff2b510d6d3256718eccd2816352d892bf247

       
      
  
  
  
  
  
      </div>

      
      <div style="text-align:center; margin-top=30px;">

        <!--the container div class-->
        
      
      </div>
   <!--Theme Switcher-->

   {% block theme_switcher %}
      {% include "theme_switcher.html" %}
  {% endblock theme_switcher %}
</div>


<!-- app end-->
{% block common_js %}
<<<<<<< HEAD
      {% include "common_js.html" %}
  {% endblock common_js %}
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{% static 'table_search.js'%}"></script> 
  <script src="{% static 'table_search.js'%}"></script>
  <!--Script for image previewing on modal-->
  <script>

    // full screens
    $(document).ready(function() {
      $(".clickable").click(function() {
        var element = this;
  
        if (element.requestFullscreen) {
          element.requestFullscreen();
        } else if (element.mozRequestFullScreen) {
          element.mozRequestFullScreen();
        } else if (element.webkitRequestFullscreen) {
          element.webkitRequestFullscreen();
        } else if (element.msRequestFullscreen) {
          element.msRequestFullscreen();
        }
      });
    });

    // full screen code ends here

      jQuery(document).ready(function () {
          ImgUpload();
        });
        
        function ImgUpload() {
          var imgWrap = "";
          var imgArray = [];
        
          $('.upload__inputfile').each(function () {
            $(this).on('change', function (e) {
              imgWrap = $(this).closest('.upload__box').find('.upload__img-wrap');
              var maxLength = $(this).attr('data-max_length');
        
              var files = e.target.files;
              var filesArr = Array.prototype.slice.call(files);
              var iterator = 0;
              filesArr.forEach(function (f, index) {
        
                if (!f.type.match('image.*')) {
                  return;
                }
        
                if (imgArray.length > maxLength) {
                  return false
                } else {
                  var len = 0;
                  for (var i = 0; i < imgArray.length; i++) {
                    if (imgArray[i] !== undefined) {
                      len++;
                    }
                  }
                  if (len > maxLength) {
                    return false;
                  } else {
                    imgArray.push(f);
        
                    var reader = new FileReader();
                    reader.onload = function (e) {
                      var html = "<div class='upload__img-box'><div style='background-image: url(" + e.target.result + ")' data-number='" + $(".upload__img-close").length + "' data-file='" + f.name + "' class='img-bg'><div class='upload__img-close'></div></div></div>";
                      imgWrap.append(html);
                      iterator++;
                    }
                    reader.readAsDataURL(f);
                  }
                }
              });
            });
          });
        
          $('body').on('click', ".upload__img-close", function (e) {
            var file = $(this).parent().data("file");
            for (var i = 0; i < imgArray.length; i++) {
              if (imgArray[i].name === file) {
                imgArray.splice(i, 1);
                break;
              }
            }
            $(this).parent().parent().remove();

            updateInputField(imgArray);
          });
        }

        function updateInputField(files) {
  // Assuming your input field has an ID like "fileInput"
  var inputField = $('#fileInput')[0];  // Adjust the ID accordingly

  // Create a new FileList object
  var newFileList = new DataTransfer();

  // Add files to the FileList
  for (var i = 0; i < files.length; i++) {
      newFileList.items.add(files[i]);
  }

  // Set the input field's files to the new FileList
  inputField.files = newFileList.files;
}
        function triggerFileInput(element) {
          element.nextElementSibling.click();
      }
  
      function displayNewImage(input) {
          var preview = input.previousElementSibling;
          var file = input.files[0];
  
          if (file) {
              var reader = new FileReader();
  
              reader.onload = function (e) {
                  preview.src = e.target.result;
              };
  
              reader.readAsDataURL(file);
          }
      }
      
  </script>
  
=======
        {% include "common_js.html" %}
    {% endblock common_js %}
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'table_search.js'%}"></script> 
    <script src="{% static 'table_search.js'%}"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    


    <script>
      function closeMessage(button) {
          // Find the parent element (the <p> tag) and remove it
          var messageElement = button.parentNode;
          messageElement.parentNode.removeChild(messageElement);
      }
    </script>
    
    <script>
      $(document).ready(function () {
          $('#image-input').on('change', function () {
              var container = $('#selected-image-container');
              container.empty();
  
              var input = $(this)[0];
              var file = input.files[0];
  
              if (file) {
                  var reader = new FileReader();
  
                  reader.onload = function (e) {
                      var selectedImage = $('<img class="selected-image" src="' + e.target.result + '">');
                      container.append(selectedImage);
                  };
  
                  reader.readAsDataURL(file);
              }
          });
      });
  
      document.addEventListener("DOMContentLoaded", function () {
          const fileInput = document.getElementById("image-input");
  
          fileInput.addEventListener("change", function () {
              const selectedFiles = this.files;
              const maxAllowedFiles = 1; // Allow only 1 file to be selected
  
              if (selectedFiles.length > maxAllowedFiles) {
                  alert("You can upload only one image.");
                  // Clear the file input or handle it based on your requirements
                  this.value = null;
              }
  
              // Update the selected image container or perform other actions as needed
              updateSelectedImageContainer(selectedFiles);
          });
  
          function updateSelectedImageContainer(files) {
              const container = document.getElementById("selected-image-container");
              container.innerHTML = ""; // Clear existing content
  
              if (files.length > 0) {
                  const file = files[0];
                  const fileName = file.name;
                  const selectedImage = document.createElement("img");
                  selectedImage.src = URL.createObjectURL(file);
                  selectedImage.className = "selected-image";
                  container.appendChild(selectedImage);
              }
  
              // Update the hidden input with the selected image's information
              updateHiddenInput(files);
          }
  
          function updateHiddenInput(files) {
              const hiddenInput = document.getElementById("selected-image");
              const fileNames = Array.from(files).map((file) => file.name);
              hiddenInput.value = fileNames.join(", ");
          }
      });

      function openModal(image_id) {
        // Set data in the modal
        var inputElement = document.getElementById('image_id');
        inputElement.value=image_id;
    
      }
  </script>
>>>>>>> b78ff2b510d6d3256718eccd2816352d892bf247
</body>
</html>